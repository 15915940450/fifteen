<!DOCTYPE html>
<html>
<head>
<title>algorithm</title>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
<meta name="author" content="Thilina Fong" />
<meta name="description" content="" />
</head>
<body>

<div id="container">
  algorithm
</div>  <!--container-->

<script src="http://localhost/agc/dist/static/lodash.ili.js"></script>
<script type="text/javascript">
//1.準備數組arr[shuffle 0 ~ 10000]
var arr=[];
for(var i=0;i<1e4;i++){
  arr.push(i);
  arr=_.shuffle(arr);
}
_.logErr(arr);

//2.quickSort(developed by Tony Hoare in 1959 and published in 1961)
//https://www.nczonline.net/blog/2012/11/27/computer-science-in-javascript-quicksort/
//Quicksort is generally considered to be efficient and fast and so is used by V8 as the implementation for Array.prototype.sort() on arrays with more than 23 items. For less than 23 items, V8 uses insertion sort. Merge sort is a competitor of quicksort as it is also efficient and fast but has the added benefit of being stable. This is why Mozilla and Safari use it for their implementation of Array.prototype.sort().
function quickSort(arr){
  //当待排序序列长度分割到一定大小后(23)，使用插入排序。遞歸函數開頭位置總是包含 return 最小單元情況的條件語句
  if(arr.length<23){
    return iSort(arr);
  }
  //中軸pivot,隨機選取
  var pivot=arr[Math.floor(Math.random()*arr.length)];

  var arrL=[];
  var arrR=[];
  var arrE=[];
  arr.forEach(function(v){
    if(v<pivot){
      arrL.push(v);
    }else if(v===pivot){
      arrE.push(v);
    }else{
      arrR.push(v);
    }
  });
  //遞歸調用
  return quickSort(arrL).concat(arrE,quickSort(arrR));
}
function iSort(arr){
  for(var i=1;i<arr.length;i++){
    var tmp=arr[i];
    for(var j=i;j>0;j--){
      if(tmp>arr[j-1]){
        break;
      }
      arr[j]=arr[j-1];
    }
    arr[j]=tmp;
  }
  return arr;
}
console.time('quick');
var arrSorted=quickSort(arr);
console.timeEnd('quick');
_.logErr(arrSorted);
//今生无悔
//https://cnbtkitty.xyz/
//https://cntorrentkitty.com/
</script>
</body>
</html>
